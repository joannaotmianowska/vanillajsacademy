<!DOCTYPE html>
<html>
<head>
	<title>DOM Manipulation Library</title>

	<style type="text/css">
		body {
			margin: 1em auto;
			max-width: 40em;
			width: 88%;
		}


		.btn-blue {
			background-color: #0088cc;
			color: #ffffff;
		}

		.btn-purple {
			background-color: rebeccapurple;
			color: #ffffff;
		}
	</style>
</head>
<body>

	<h1>DOM Manipulation Library</h1>

	<p>All of the fun here happens in the console.</p>

	<p>
		<button class="btn-blue" id="button-1">Button 1</button>
		<button class="btn-blue" id="button-2">Button 2</button>
		<button class="btn-blue" id="button-3">Button 3</button>
	</p>

	<ul>
		<li>Item 1</li>
		<li>Item 2</li>
		<li>Item 3</li>
	</ul>

	<script>
        /*
        Create a DOM manipulation library with public methods you can use toâ€¦

        Get an array of items from the DOM.
        Get the first and last matching items from the DOM.
        Add and remove a class to all matching elements.
        */

        const DOMElements =  (function() {
            const Constructor = function(selector, className) {
                this.selector = selector;
                this.className = className;
            }

            // Returns an array of all elements matching selector given when initializing the library
            Constructor.prototype.getArray = function() {
                return Array.prototype.slice.call(document.querySelectorAll(this.selector))
            }

            // Returns first element that matches selector given when initializing the library
            Constructor.prototype.getFirst = function() {
                return document.querySelector(this.selector);
            }

            // Returns last element that matches selector given when initializing the library
            Constructor.prototype.getLast = function() {
                const allElements = document.querySelectorAll(this.selector);
                return allElements[allElements.length - 1];
            }

            // Adds CSS class that was given when initializing the library to all matching elements
            Constructor.prototype.addClass = function() {
                const elements = this.getArray();
                elements.forEach(el => { el.classList.add(this.className) });
            }

            // Removes CSS class that was given when initializing the library from all matching elements
            Constructor.prototype.removeClass = function() {
                const elements = this.getArray();
                elements.forEach(el => { el.classList.remove(this.className) });
            }

            return Constructor;
        })();

        // Testing

        const buttons = new DOMElements('button', 'btn-purple');
        console.log(buttons);

        const buttonsArray = buttons.getArray();
        console.log(buttonsArray);

        const firstButton = buttons.getFirst();
        console.log(firstButton);

        const lastButton = buttons.getLast();
        console.log(lastButton);

        buttons.addClass();
        console.log(firstButton.classList);

        buttons.removeClass();
        console.log(firstButton.classList);
	</script>
</body>
</html>